<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>é«˜é“å¯¼è§ˆAI + å°çº¢ä¹¦æ’ç‰ˆ</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html-to-image/1.11.11/html-to-image.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/2.0.5/FileSaver.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/marked@4.3.0/marked.min.js"></script>
    <style>
        body { font-family: 'Inter', 'Noto Sans SC', sans-serif; background: #f5f5f5; }
        .card { width: 375px; min-height: 500px; background: white; box-shadow: 0 4px 20px rgba(0,0,0,0.1); margin: 20px auto; padding: 40px; }
        .theme-blue { background: #EBF5FB; color: #1E3A5F; }
        .theme-warm { background: #F2EFE9; color: #2c2c2c; }
        .loading { animation: pulse 2s infinite; }
        @keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: 0.5; } }
        .step { display: none; }
        .step.active { display: block; }
    </style>
</head>
<body class="min-h-screen">
    <!-- Header -->
    <div class="bg-black text-white py-4 px-6 flex justify-between items-center">
        <h1 class="font-bold text-lg">ğŸš„ é«˜é“å¯¼è§ˆAI + å°çº¢ä¹¦æ’ç‰ˆ</h1>
        <div class="flex gap-2">
            <button onclick="showStep(1)" class="text-xs bg-gray-800 px-3 py-1 rounded hover:bg-gray-700">Step 1: ä¸Šä¼ </button>
            <button onclick="showStep(2)" class="text-xs bg-gray-800 px-3 py-1 rounded hover:bg-gray-700">Step 2: æ–‡æ¡ˆ</button>
            <button onclick="showStep(3)" class="text-xs bg-gray-800 px-3 py-1 rounded hover:bg-gray-700">Step 3: æ’ç‰ˆ</button>
        </div>
    </div>

    <div class="max-w-6xl mx-auto p-6">
        <!-- Step 1: ä¸Šä¼ å›¾ç‰‡ -->
        <div id="step1" class="step active">
            <div class="bg-white rounded-xl shadow-lg p-8">
                <h2 class="text-2xl font-bold mb-6">ğŸ“¸ ä¸Šä¼ é«˜é“ç«™ç…§ç‰‡</h2>
                <div class="grid grid-cols-2 gap-6">
                    <div>
                        <label class="block text-sm font-medium mb-2">è½¦ç«™åç§°</label>
                        <input type="text" id="station-name" class="w-full border rounded-lg p-3" placeholder="å¦‚ï¼šåŒ—äº¬å—ç«™">
                    </div>
                    <div>
                        <label class="block text-sm font-medium mb-2">æœåŠ¡ç‚¹ç±»å‹</label>
                        <select id="location-type" class="w-full border rounded-lg p-3">
                            <option value="è¿›ç«™å£">è¿›ç«™å£</option>
                            <option value="å®‰æ£€å£">å®‰æ£€å£</option>
                            <option value="å€™è½¦å¤§å…">å€™è½¦å¤§å…</option>
                            <option value="æ£€ç¥¨å£">æ£€ç¥¨å£</option>
                            <option value="æœåŠ¡å°">æœåŠ¡å°</option>
                            <option value="é¤é¥®è´­ç‰©">é¤é¥®è´­ç‰©</option>
                            <option value="å‡ºç«™æ¢ä¹˜">å‡ºç«™/æ¢ä¹˜</option>
                        </select>
                    </div>
                </div>
                
                <div class="mt-6">
                    <label class="block text-sm font-medium mb-2">ä¸Šä¼ ç…§ç‰‡</label>
                    <div class="border-2 border-dashed border-gray-300 rounded-xl p-8 text-center hover:border-blue-500 transition-colors cursor-pointer" onclick="document.getElementById('photo-input').click()">
                        <div class="text-4xl mb-2">ğŸ“·</div>
                        <p class="text-gray-500">ç‚¹å‡»ä¸Šä¼ æˆ–æ‹–æ‹½ç…§ç‰‡åˆ°è¿™é‡Œ</p>
                        <p class="text-xs text-gray-400 mt-1">æ”¯æŒ JPGã€PNG</p>
                    </div>
                    <input type="file" id="photo-input" accept="image/*" class="hidden" onchange="handlePhotoUpload(this)">
                </div>

                <div id="photo-preview" class="mt-6 hidden">
                    <img id="preview-img" class="max-h-64 rounded-lg shadow mx-auto">
                </div>

                <div class="mt-6 flex gap-4">
                    <button onclick="generateCopy()" class="flex-1 bg-blue-600 text-white py-3 rounded-lg font-bold hover:bg-blue-700 transition">
                        âœ¨ AIç”Ÿæˆæ–‡æ¡ˆ
                    </button>
                    <button onclick="skipToEdit()" class="px-6 border border-gray-300 py-3 rounded-lg hover:bg-gray-50">
                        è·³è¿‡ï¼Œç›´æ¥æ’ç‰ˆ
                    </button>
                </div>
            </div>
        </div>

        <!-- Step 2: ç¼–è¾‘æ–‡æ¡ˆ -->
        <div id="step2" class="step">
            <div class="grid grid-cols-2 gap-6">
                <div class="bg-white rounded-xl shadow-lg p-6">
                    <h2 class="text-xl font-bold mb-4">ğŸ“ ç¼–è¾‘æ–‡æ¡ˆ</h2>
                    
                    <div class="mb-4">
                        <label class="block text-sm font-medium mb-1">ç›®æ ‡å¹³å°</label>
                        <select id="platform" class="w-full border rounded p-2" onchange="updateTemplate()">
                            <option value="å°çº¢ä¹¦">å°çº¢ä¹¦</option>
                            <option value="æŠ–éŸ³">æŠ–éŸ³</option>
                            <option value="æœ‹å‹åœˆ">æœ‹å‹åœˆ</option>
                        </select>
                    </div>

                    <div class="mb-4">
                        <label class="block text-sm font-medium mb-1">è¯­æ°”é£æ ¼</label>
                        <select id="tone" class="w-full border rounded p-2">
                            <option value="äº²åˆ‡è´´å¿ƒ">äº²åˆ‡è´´å¿ƒ</option>
                            <option value="ä¸“ä¸šé«˜æ•ˆ">ä¸“ä¸šé«˜æ•ˆ</option>
                            <option value="æ´»æ³¼æœ‰è¶£">æ´»æ³¼æœ‰è¶£</option>
                        </select>
                    </div>

                    <textarea id="generated-content" class="w-full h-96 border rounded-lg p-4 font-mono text-sm" placeholder="AIç”Ÿæˆçš„æ–‡æ¡ˆä¼šæ˜¾ç¤ºåœ¨è¿™é‡Œ...

ä¹Ÿå¯ä»¥ç›´æ¥ç²˜è´´è‡ªå·±çš„æ–‡æ¡ˆ"></textarea>
                    
                    <div class="mt-4 flex gap-2">
                        <button onclick="regenerate()" class="flex-1 bg-gray-100 py-2 rounded hover:bg-gray-200">é‡æ–°ç”Ÿæˆ</button>
                        <button onclick="showStep(3)" class="flex-1 bg-black text-white py-2 rounded hover:bg-gray-800">å»æ’ç‰ˆ â†’</button>
                    </div>
                </div>

                <div class="bg-gray-100 rounded-xl p-6">
                    <h3 class="font-bold mb-4">ğŸ’¡ æç¤º</h3>
                    <ul class="text-sm text-gray-600 space-y-2">
                        <li>â€¢ å°çº¢ä¹¦é£æ ¼ï¼š emoji å¤šã€åˆ†æ®µçŸ­</li>
                        <li>â€¢ æŠ–éŸ³é£æ ¼ï¼š å¼€å¤´æŠ“çœ¼çƒã€èŠ‚å¥å¿«</li>
                        <li>â€¢ å¯ä»¥æ‰‹åŠ¨ä¿®æ”¹AIç”Ÿæˆçš„æ–‡æ¡ˆ</li>
                        <li>â€¢ ç”¨ **æ–‡å­—** å¯ä»¥åŠ ç²—</li>
                    </ul>
                    
                    <div class="mt-6 p-4 bg-blue-50 rounded-lg">
                        <h4 class="font-bold text-blue-800 mb-2">å½“å‰ç…§ç‰‡</h4>
                        <img id="step2-img" class="max-h-32 rounded">
                    </div>
                </div>
            </div>
        </div>

        <!-- Step 3: å°çº¢ä¹¦æ’ç‰ˆ -->
        <div id="step3" class="step">
            <div class="grid grid-cols-3 gap-6">
                <!-- å·¦ä¾§ï¼šæ’ç‰ˆè®¾ç½® -->
                <div class="bg-white rounded-xl shadow-lg p-6">
                    <h2 class="text-xl font-bold mb-4">ğŸ¨ æ’ç‰ˆè®¾ç½®</h2>
                    
                    <div class="mb-4">
                        <label class="block text-sm font-medium mb-1">å°é¢æ ‡é¢˜</label>
                        <input type="text" id="cover-title" class="w-full border rounded p-2" value="">
                    </div>

                    <div class="mb-4">
                        <label class="block text-sm font-medium mb-1">é£æ ¼ä¸»é¢˜</label>
                        <select id="theme" class="w-full border rounded p-2" onchange="renderCard()">
                            <option value="theme-blue">ğŸ”µ æµ…è“é£</option>
                            <option value="theme-warm">ğŸ“– ä¹¦å·é£</option>
                            <option value="theme-neon">âš¡ å†²å‡»æ³¢</option>
                            <option value="theme-dark">ğŸ”· ç§‘æŠ€é£</option>
                        </select>
                    </div>

                    <div class="mb-4">
                        <label class="block text-sm font-medium mb-1">ä½œè€…ç½²å</label>
                        <input type="text" id="author" class="w-full border rounded p-2" value="xupaozi">
                    </div>

                    <div class="mb-4">
                        <label class="block text-sm font-medium mb-1">æ—¥æœŸ/æœŸå·</label>
                        <input type="text" id="date-vol" class="w-full border rounded p-2" value="VOL.01">
                    </div>

                    <button onclick="downloadCard()" class="w-full bg-black text-white py-3 rounded-lg font-bold hover:bg-gray-800">
                        ğŸ“¥ å¯¼å‡ºå›¾ç‰‡
                    </button>
                    
                    <button onclick="showStep(1)" class="w-full mt-2 border border-gray-300 py-2 rounded hover:bg-gray-50">
                        â† é‡æ–°å¼€å§‹
                    </button>
                </div>

                <!-- å³ä¾§ï¼šé¢„è§ˆ -->
                <div class="col-span-2 bg-gray-200 rounded-xl p-8 flex justify-center overflow-auto">
                    <div id="card-preview" class="card theme-blue">
                        <div class="h-full flex flex-col">
                            <div class="text-xs font-bold tracking-widest mb-4 opacity-60" id="card-date">VOL.01</div>
                            <h1 id="card-title" class="text-3xl font-black mb-4 leading-tight">æ ‡é¢˜</h1>
                            <div class="w-12 h-1 bg-blue-500 mb-6"></div>
                            <div id="card-content" class="flex-1 overflow-hidden text-sm leading-relaxed">
                                å†…å®¹é¢„è§ˆ...
                            </div>
                            <div class="mt-auto pt-4 border-t border-blue-300/30 flex justify-between items-center text-xs">
                                <span id="card-author" class="font-bold">xupaozi</span>
                                <span>é«˜é“å‡ºè¡ŒæŒ‡å—</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- æ¨¡æ‹ŸAIç”Ÿæˆloading -->
    <div id="loading-modal" class="fixed inset-0 bg-black/50 hidden items-center justify-center z-50">
        <div class="bg-white rounded-xl p-8 text-center">
            <div class="text-4xl mb-4 loading">âœ¨</div>
            <p class="font-bold">AIæ­£åœ¨åˆ†æç…§ç‰‡ç”Ÿæˆæ–‡æ¡ˆ...</p>
            <p class="text-sm text-gray-500 mt-2">è¯·ç¨å€™</p>
        </div>
    </div>

    <script>
        // çŠ¶æ€ç®¡ç†
        let currentPhoto = null;
        let generatedText = '';
        
        // æ˜¾ç¤ºæ­¥éª¤
        function showStep(n) {
            document.querySelectorAll('.step').forEach(s => s.classList.remove('active'));
            document.getElementById('step'+n).classList.add('active');
        }
        
        // å¤„ç†ç…§ç‰‡ä¸Šä¼ 
        function handlePhotoUpload(input) {
            const file = input.files[0];
            if (!file) return;
            
            const reader = new FileReader();
            reader.onload = (e) => {
                currentPhoto = e.target.result;
                document.getElementById('preview-img').src = currentPhoto;
                document.getElementById('step2-img').src = currentPhoto;
                document.getElementById('photo-preview').classList.remove('hidden');
            };
            reader.readAsDataURL(file);
        }
        
        // æ¨¡æ‹ŸAIç”Ÿæˆæ–‡æ¡ˆ
        function generateCopy() {
            const station = document.getElementById('station-name').value || 'XXé«˜é“ç«™';
            const location = document.getElementById('location-type').value;
            
            if (!currentPhoto) {
                alert('è¯·å…ˆä¸Šä¼ ç…§ç‰‡');
                return;
            }
            
            document.getElementById('loading-modal').classList.remove('hidden');
            document.getElementById('loading-modal').classList.add('flex');
            
            // æ¨¡æ‹ŸAPIå»¶è¿Ÿ
            setTimeout(() => {
                const templates = {
                    'è¿›ç«™å£': `ã€${station}è¿›ç«™æ”»ç•¥ã€‘ç¬¬ä¸€æ¬¡æ¥ä¹Ÿä¸æ…Œï¼ğŸ“

âœ¨ è¿›ç«™æµç¨‹è¶…ç®€å•ï¼š
1ï¸âƒ£ æå‰å‡†å¤‡å¥½èº«ä»½è¯
2ï¸âƒ£ æ‰¾åˆ°å¯¹åº”è¿›ç«™å£ï¼ˆä¸œ/è¥¿å¹¿åœºï¼‰
3ï¸âƒ£ åˆ·è„¸æˆ–åˆ·è¯ç§’è¿›ç«™

ğŸ’¡ è´´å¿ƒTipsï¼š
â€¢ ä¸œè¿›ç«™å£ â†’ é è¿‘åœ°é“Aå£
â€¢ è¥¿è¿›ç«™å£ â†’ é€‚åˆæ‰“è½¦çš„å°ä¼™ä¼´
â€¢ æ— éšœç¢é€šé“åœ¨ä¸¤ä¾§ï¼Œç”µæ¢¯ç›´è¾¾

â° å»ºè®®æå‰30åˆ†é’Ÿåˆ°
     é«˜å³°æœŸé¢„ç•™1å°æ—¶æ›´ä¿é™©ï¼

#é«˜é“å‡ºè¡Œ #${station} #æ—…è¡Œæ”»ç•¥`,
                    
                    'å®‰æ£€å£': `ã€${station}å®‰æ£€å¿«é€Ÿé€šå…³ã€‘âš¡

ğŸš« è¿™äº›ä¸œè¥¿åˆ«å¸¦ï¼š
â€¢ è¶…è¿‡100mlçš„æ¶²ä½“
â€¢ å……ç”µå®è¦æ‹¿å‡ºæ¥æ£€æŸ¥
â€¢ å–·é›¾ç±»ç‰©å“æœ‰é™åˆ¶

âœ… å¿«é€Ÿè¿‡æ£€ç§˜è¯€ï¼š
1. æå‰æå‡ºå£è¢‹é‡Œçš„ä¸œè¥¿
2. å¤§è¡£å¤–å¥—å»ºè®®è„±æ‰
3. ç”µè„‘ã€å¹³æ¿å•ç‹¬æ”¾

ğŸ‘¶ å¸¦å¨ƒå®¶åº­èµ°å·¦ä¾§çˆ±å¿ƒé€šé“
     ä¸ç”¨æ’é˜Ÿè¶…æ–¹ä¾¿ï¼

#é«˜é“å®‰æ£€ #å‡ºè¡Œå°è´´å£«`,
                    
                    'å€™è½¦å¤§å…': `ã€${station}å€™è½¦æŒ‡å—ã€‘èˆ’æœçš„ç­‰è½¦ä½“éªŒâ˜•

ğŸ¯ æ‰¾æ£€ç¥¨å£å°æŠ€å·§ï¼š
æ•°å­—å°çš„ â†’ å¾€AåŒºèµ°
æ•°å­—å¤§çš„ â†’ å¾€BåŒºèµ°

ğŸ” åƒå–æŒ‡å—ï¼š
â€¢ éº¦å½“åŠ³åœ¨äºŒæ¥¼ä¸œä¾§
â€¢ ä¾¿åˆ©åº—24å°æ—¶è¥ä¸š
â€¢ è‡ªåŠ¨è´©å–æœºéšå¤„å¯è§

ğŸ”Œ å……ç”µä½ç½®ï¼š
åº§æ¤…ä¸‹æ–¹æœ‰æ’åº§
æŒ‰æ‘©æ¤…æ—è¾¹ä¹Ÿæœ‰USBå£

#é«˜é“å€™è½¦ #å‡ºè¡Œæ”»ç•¥`,
                    
                    'æ£€ç¥¨å£': `ã€${station}æ£€ç¥¨æ”»ç•¥ã€‘å‡†ç‚¹ä¸Šè½¦ä¸æ…Œå¼ ï¼ğŸš„

â° æ—¶é—´èŠ‚ç‚¹è¦è®°ç‰¢ï¼š
â€¢ å¼€è½¦å‰15åˆ†é’Ÿå¼€å§‹æ£€ç¥¨
â€¢ å¼€è½¦å‰3åˆ†é’Ÿåœæ­¢æ£€ç¥¨
â€¢ æå‰10åˆ†é’Ÿåˆ°æœ€ä¿é™©

ğŸ« æ£€ç¥¨æ–¹å¼ï¼š
åˆ·èº«ä»½è¯ âœ… æœ€æ–¹ä¾¿
åˆ·è„¸è¿›ç«™ âœ… æ›´å¿«
äººå·¥é€šé“ âœ… å¸¦å°å­©çš„èµ°è¿™é‡Œ

ğŸš‡ A/Bå£å¯¹åº”è½¦å¢ï¼š
Aå£ â†’ å°å·è½¦å¢ï¼ˆ1-8ï¼‰
Bå£ â†’ å¤§å·è½¦å¢ï¼ˆ9-16ï¼‰

#é«˜é“æ£€ç¥¨ #å‡†ç‚¹å‡ºè¡Œ`,
                    
                    'æœåŠ¡å°': `ã€${station}æœåŠ¡ä¸­å¿ƒã€‘æœ‰é—®é¢˜æ‰¾è¿™é‡Œï¼ğŸ’â€â™€ï¸

ğŸ“ ä½ç½®ï¼šå€™è½¦å¤§å…æ­£ä¸­å¤®
     çº¢è‰²æ ‡è¯†å¾ˆæ˜æ˜¾

ğŸ†˜ èƒ½åŠçš„ä¸šåŠ¡ï¼š
â€¢ æ”¹ç­¾ã€é€€ç¥¨
â€¢ ä¸´æ—¶èº«ä»½è¯åŠç†
â€¢ å¤±ç‰©æ‹›é¢†ç™»è®°
â€¢ é‡ç‚¹æ—…å®¢é¢„çº¦

â™¿ ä¾¿æ°‘æœåŠ¡ï¼š
è½®æ¤…ã€æ‹æ–å…è´¹å€Ÿç”¨
æ¯å©´å®¤ä¼‘æ¯
åŒ»åŠ¡å®¤åº”æ€¥

#é«˜é“æœåŠ¡ #ä¾¿æ°‘ä¿¡æ¯`,
                    
                    'å‡ºç«™æ¢ä¹˜': `ã€${station}å‡ºç«™æŒ‡å—ã€‘æ— ç¼è¡”æ¥å¸‚åŒºï¼ğŸšŒ

ğŸš‡ åœ°é“ï¼š
å‡ºç«™åå³è½¬ â†’ åœ°é“å…¥å£
æ”¯æŒæ‰«ç /åˆ·å¡/ç°é‡‘

ğŸš• æ‰“è½¦ï¼š
â€¢ ç½‘çº¦è½¦ â†’ ä¸œå¹¿åœºè´ŸäºŒå±‚
â€¢ å‡ºç§Ÿè½¦ â†’ è¥¿å¹¿åœºæ’é˜Ÿ

ğŸšŒ å…¬äº¤ï¼š
ç«™å°åœ¨åœ°é¢å±‚
å¤šæ¡çº¿è·¯å¯è¾¾å¸‚åŒº

ğŸ§³ è¡Œæå¯„å­˜ï¼š
å‡ºç«™å£æ—æœ‰å¯„å­˜æŸœ
å¤§ä»¶è¡Œæä¹Ÿèƒ½å­˜

#é«˜é“å‡ºç«™ #äº¤é€šæ¥é©³`,
                    
                    'é¤é¥®è´­ç‰©': `ã€${station}ç¾é£Ÿåœ°å›¾ã€‘ç­‰è½¦ä¸æ— èŠï¼ğŸœ

ğŸ” å¿«é¤é€‰æ‹©ï¼š
â€¢ è‚¯å¾·åŸºï¼ˆäºŒæ¥¼ä¸œä¾§ï¼‰
â€¢ éº¦å½“åŠ³ï¼ˆä¸€æ¥¼è¥¿ä¾§ï¼‰
â€¢ çœŸåŠŸå¤«ï¼ˆä¸­éƒ¨åŒºåŸŸï¼‰

â˜• å’–å•¡èŒ¶é¥®ï¼š
æ˜Ÿå·´å…‹ã€ç‘å¹¸éƒ½æœ‰
å€™è½¦æ¥ä¸€æ¯æç¥

ğŸ›ï¸ ç‰¹äº§è´­ä¹°ï¼š
å½“åœ°ç‰¹äº§åº—åœ¨å®‰æ£€å£æ—
ç¤¼ç›’è£…é€‚åˆé€äºº

ğŸ’° ä»·æ ¼å‚è€ƒï¼š
æ¯”å¸‚åŒºè´µ10-20%
ä½†èƒœåœ¨æ–¹ä¾¿

#é«˜é“ç¾é£Ÿ #è½¦ç«™è´­ç‰©`
                };
                
                generatedText = templates[location] || templates['è¿›ç«™å£'];
                document.getElementById('generated-content').value = generatedText;
                
                // è‡ªåŠ¨æå–æ ‡é¢˜
                const titleMatch = generatedText.match(/ã€(.+?)ã€‘/);
                if (titleMatch) {
                    document.getElementById('cover-title').value = titleMatch[1];
                }
                
                document.getElementById('loading-modal').classList.add('hidden');
                document.getElementById('loading-modal').classList.remove('flex');
                
                showStep(2);
            }, 1500);
        }
        
        // è·³è¿‡ç›´æ¥æ’ç‰ˆ
        function skipToEdit() {
            showStep(2);
        }
        
        // é‡æ–°ç”Ÿæˆ
        function regenerate() {
            generateCopy();
        }
        
        // æ¸²æŸ“å¡ç‰‡
        function renderCard() {
            const title = document.getElementById('cover-title').value || 'é«˜é“å‡ºè¡ŒæŒ‡å—';
            const author = document.getElementById('author').value || 'xupaozi';
            const date = document.getElementById('date-vol').value || 'VOL.01';
            const content = document.getElementById('generated-content').value || '';
            const theme = document.getElementById('theme').value;
            
            document.getElementById('card-title').textContent = title;
            document.getElementById('card-author').textContent = author;
            document.getElementById('card-date').textContent = date;
            
            // å¤„ç†å†…å®¹ï¼ˆç®€åŒ–ç‰ˆï¼Œå»æ‰markdownè¯­æ³•ï¼‰
            let displayContent = content
                .replace(/ã€(.+?)ã€‘/g, '<h2 class="font-bold text-lg mb-2 mt-4">$1</h2>')
                .replace(/#{1,6}\s?/g, '')
                .replace(/\*\*(.+?)\*\*/g, '<strong>$1</strong>')
                .replace(/â€¢ /g, 'Â· ')
                .replace(/\n/g, '<br>');
            
            document.getElementById('card-content').innerHTML = displayContent;
            
            // åº”ç”¨ä¸»é¢˜
            const card = document.getElementById('card-preview');
            card.className = 'card ' + theme;
            
            // ä¸»é¢˜ç‰¹å®šæ ·å¼
            if (theme === 'theme-blue') {
                card.style.background = '#EBF5FB';
                card.style.color = '#1E3A5F';
            } else if (theme === 'theme-warm') {
                card.style.background = '#F2EFE9';
                card.style.color = '#2c2c2c';
            } else if (theme === 'theme-neon') {
                card.style.background = '#CCFF00';
                card.style.color = '#000';
            } else if (theme === 'theme-dark') {
                card.style.background = '#0F172A';
                card.style.color = '#E2E8F0';
            }
        }
        
        // å¯¼å‡ºå›¾ç‰‡
        async function downloadCard() {
            const card = document.getElementById('card-preview');
            try {
                const dataUrl = await htmlToImage.toJpeg(card, { quality: 0.9, pixelRatio: 2 });
                saveAs(dataUrl, 'é«˜é“å¯¼è§ˆ_' + document.getElementById('cover-title').value + '.jpg');
            } catch (e) {
                alert('å¯¼å‡ºå¤±è´¥: ' + e);
            }
        }
        
        // ç›‘å¬è¾“å…¥å˜åŒ–
        document.getElementById('cover-title').addEventListener('input', renderCard);
        document.getElementById('author').addEventListener('input', renderCard);
        document.getElementById('date-vol').addEventListener('input', renderCard);
        document.getElementById('generated-content').addEventListener('input', function() {
            generatedText = this.value;
            renderCard();
        });
        
        // åˆå§‹åŒ–
        renderCard();
    </script>
</body>
</html>
